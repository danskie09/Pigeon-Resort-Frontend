<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pigeon Resort | Staff Bookings</title>

  <link rel="icon" href="../assets/images/logo.webp" type="image/webp">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css">
  <script src="https://kit.fontawesome.com/ae360af17e.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <!-- DataTables CSS -->
  <link href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css" rel="stylesheet">
  <!-- Font Awesome CDN -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

  <link rel="stylesheet" href="../staff/css/staff_bookings.css">
</head>

<body>
  <div class="wrapper">
    <aside id="sidebar" class="js-sidebar">
      <!-- Content For Sidebar -->
      <div class="h-100">
        <div class="sidebar-logo d-flex justify-content-center">
          <a href="#">
            <img src="../assets/images/logo.webp" alt="Logo" style="max-width: 200px; height: 100px" />
          </a>
        </div>
        <ul class="sidebar-nav">
          <li class="sidebar-header">Main</li>
          <li class="sidebar-item">
            <a href="../staff/dashboard.html" class="sidebar-link">
              <i class="fa-solid fa-gauge-high pe-2"></i>
              Dashboard
            </a>
          </li>
          <li class="sidebar-item">
            <a href="#" class="sidebar-link collapsed d-flex align-items-center" data-bs-target="#pages"
              data-bs-toggle="collapse" aria-expanded="false">
              <i class="fa-solid fa-calendar-check pe-2"></i>
              Bookings
              <span class="badge ms-2 notification-badge" style="background-color: orange">15</span>
            </a>

            <ul id="pages" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
              <li class="sidebar-item">
                <a href="../staff/staff_bookings.html" class="sidebar-link">New Bookings</a>
              </li>
              <li class="sidebar-item">
                <a href="../staff/add_bookings.html" class="sidebar-link">Add Bookings</a>
              </li>
            </ul>
          </li>
          <li class="sidebar-item">
            <a href="#" class="sidebar-link collapsed" data-bs-target="#posts" data-bs-toggle="collapse"
              aria-expanded="false"><i class="fa-solid fa-calendar-days pe-2"></i> Reservations
              <span class="badge ms-2 notification-badge" style="background-color: orange">6</span>
            </a>
            <ul id="posts" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
              <li class="sidebar-item">
                <a href="../staff/staff_reservations.html" class="sidebar-link">New Reservations</a>
              </li>
              <li class="sidebar-item">
                <a href="../staff/add_reservations.html" class="sidebar-link">Add Reservations</a>
              </li>
            </ul>
          </li>

          <li class="sidebar-header">Management</li>

          <li class="sidebar-item">
            <a href="../staff/staff_rooms.html" class="sidebar-link">
              <i class="fa-solid fa-door-open pe-2"></i>
              Rooms
            </a>
          </li>

          <li class="sidebar-item">
            <a href="../staff/staff_facilities.html" class="sidebar-link">
              <i class="fa-solid fa-house pe-2"></i>
              Facilities
            </a>
          </li>

          <li class="sidebar-item">
            <a href="../staff/staff_services.html" class="sidebar-link">
              <i class="fa-solid fa-square-plus pe-2"></i>
              Additional Services
            </a>
          </li>

          <li class="sidebar-item">
            <a href="../staff/housekeeping.html" class="sidebar-link">
              <i class="fa-solid fa-spray-can-sparkles pe-2"></i>
              Housekeeping
            </a>
          </li>
        </ul>
      </div>
    </aside>
    <div class="main">
      <nav class="navbar navbar-expand px-3 border-bottom">
        <button class="btn" id="sidebar-toggle" type="button">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse navbar">
          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <a href="#" data-bs-toggle="dropdown" class="nav-icon pe-md-0">
                <img src="../staff/images/user.png" class="avatar img-fluid rounded" alt="">
              </a>
              <div class="dropdown-menu dropdown-menu-end">

                <a href="#" class="dropdown-item">Logout</a>
              </div>
            </li>
          </ul>
        </div>
      </nav>
      <main class="content px-0 py-2 ">
        <div class="container-fluid px-3">

          <!-- content starts here -->

          <div class="container-fluid py-4 px-0">
            <div class="card shadow">
              <div class="card-header bg-primary text-white d-flex align-items-center justify-content-between">
                <h5 class="card-title mb-0">Current Bookings</h5>
                <div class="d-flex align-items-center">
                  <i class="fa-solid fa-calendar-check fs-4 pe-2"></i>
                 
                </div>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table id="booking" class="table table-hover align-middle">
                    <thead class="table-light">
                      <tr>
                        <th>Booking #</th>
                        <th>Room</th>
                        <th>Guest</th>
                        <th>Check In</th>
                        <th>Check Out</th>
                        <th>Guests</th>
                        <th>Stay Duration</th>
                        <th>Payment</th>
                        <th>Amount</th>
                        <th>Status</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td><span class="fw-medium">BK-2024001</span></td>
                        <td>101</td>
                        <td>John Doe</td>
                        <td>2024-03-15</td>
                        <td>2024-03-17</td>
                        <td>2 Adults, 1 Kid</td>
                        <td>Overnight</td>
                        <td>
                          <span class="badge bg-success">Paid</span>
                          <small>Gcash</small>
                        </td>
                        <td>P 3500.00</td>
                        <td><span class="badge bg-warning">Pending</span></td>
                        <td>
                          <div class="btn-group btn-group-sm">
                            <button class="btn btn-primary" title="View Details">
                              <i class="bi bi-eye"></i> View
                            </button>
                            <button class="btn btn-success" title="Approve">
                              <i class="bi bi-check-lg"></i>
                            </button>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td><span class="fw-medium">BK-2024002</span></td>
                        <td>205</td>
                        <td>Jane Smith</td>
                        <td>2024-03-16</td>
                        <td>2024-03-20</td>
                        <td>2 Adults</td>
                        <td>Day Use</td>
                        <td>
                          <span class="badge bg-success">Paid</span>
                          <small>Cash on Hand</small>
                        </td>
                        <td>P 6800.00</td>
                        <td><span class="badge bg-info">Confirmed</span></td>
                        <td>
                          <div class="btn-group btn-group-sm">
                            <button class="btn btn-primary" title="View Details">
                              <i class="bi bi-eye"></i> View
                            </button>
                            <button class="btn btn-success" title="Approve">
                              <i class="bi bi-check-lg"></i>
                            </button>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td><span class="fw-medium">BK-2024003</span></td>
                        <td>304</td>
                        <td>Robert Johnson</td>
                        <td>2024-03-18</td>
                        <td>2024-03-19</td>
                        <td>1 Adult</td>
                        <td>Day Use</td>
                        <td>
                          <span class="badge bg-success">Paid</span>
                          <small>Gcash</small>
                        </td>
                        <td>P 1500.00</td>
                        <td><span class="badge bg-success">Checked In</span></td>
                        <td>
                          <div class="btn-group btn-group-sm">
                            <button class="btn btn-primary" title="View Details">
                              <i class="bi bi-eye"></i> View
                            </button>
                            <button class="btn btn-danger" title="Check Out">
                              <i class="bi bi-box-arrow-right"></i>
                            </button>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
      </main>


    </div>
  </div>


  <!-- modal start -->
  <!-- Add this modal HTML after your table div -->
  <div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="bookingModalLabel">Booking Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="fw-bold">Booking #:</label>
              <p id="modalBookingNumber"></p>
            </div>
            <div class="col-md-6">
              <label class="fw-bold">Room:</label>
              <p id="modalRoom"></p>
            </div>
            <div class="col-md-6">
              <label class="fw-bold">Guest:</label>
              <p id="modalGuest"></p>
            </div>
            <div class="col-md-6">
              <label class="fw-bold">Check In:</label>
              <p id="modalCheckIn"></p>
            </div>
            <div class="col-md-6">
              <label class="fw-bold">Check Out:</label>
              <p id="modalCheckOut"></p>
            </div>
            <div class="col-md-6">
              <label class="fw-bold">Guests:</label>
              <p id="modalGuests"></p>
            </div>
            <div class="col-md-6">
              <label class="fw-bold">Stay Duration:</label>
              <p id="modalStayDuration"></p>
            </div>
            <div class="col-md-6">
              <label class="fw-bold">Payment Status:</label>
              <p id="modalPayment"></p>
            </div>
            <div class="col-md-6">
              <label class="fw-bold">Amount:</label>
              <p id="modalAmount"></p>
            </div>
            <div class="col-md-6">
              <label class="fw-bold">Status:</label>
              <p id="modalStatus"></p>
            </div>
          </div>

          <!-- Second column for proof and special request -->
          <div class="col-md-6">
            <div class="mb-4">
              <label class="fw-bold mb-2">Proof of Payment:</label>
              <div class="border rounded p-2">
                <img id="modalPaymentProof" src="" alt="Payment Proof" class="img-fluid mb-2"
                  style="max-height: 200px; display: none;">
                <div id="noProofMessage" class="text-muted">No proof of payment uploaded</div>
              </div>
            </div>
            <div>
              <label class="fw-bold mb-2">Special Request:</label>
              <div class="border rounded p-2">
                <p id="modalSpecialRequest" class="mb-0 text-muted">No special requests</p>
              </div>
            </div>
          </div>



        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- modal end -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Required Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
  <script>


    $(document).ready(function () {
      $('#booking').DataTable({
        order: [[0, 'desc']], // Sort by timestamp descending
        pageLength: 10,
        responsive: true,
        dom: 'Bfrtip',
        lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]]
      });
    });


    const sidebarToggle = document.querySelector("#sidebar-toggle");
    sidebarToggle.addEventListener("click", function () {
      document.querySelector("#sidebar").classList.toggle("collapsed");
    });



    // Function to open modal and populate data
    function viewBookingDetails(button) {
      // Get the parent row
      const row = button.closest('tr');

      // Get all the data from the row
      const bookingNumber = row.querySelector('td:nth-child(1)').textContent;
      const room = row.querySelector('td:nth-child(2)').textContent;
      const guest = row.querySelector('td:nth-child(3)').textContent;
      const checkIn = row.querySelector('td:nth-child(4)').textContent;
      const checkOut = row.querySelector('td:nth-child(5)').textContent;
      const guests = row.querySelector('td:nth-child(6)').textContent;
      const stayDuration = row.querySelector('td:nth-child(7)').textContent;
      const payment = row.querySelector('td:nth-child(8)').innerHTML;
      const amount = row.querySelector('td:nth-child(9)').textContent;
      const status = row.querySelector('td:nth-child(10)').innerHTML;

      // Populate the modal with the data
      document.getElementById('modalBookingNumber').textContent = bookingNumber;
      document.getElementById('modalRoom').textContent = room;
      document.getElementById('modalGuest').textContent = guest;
      document.getElementById('modalCheckIn').textContent = checkIn;
      document.getElementById('modalCheckOut').textContent = checkOut;
      document.getElementById('modalGuests').textContent = guests;
      document.getElementById('modalStayDuration').textContent = stayDuration;
      document.getElementById('modalPayment').innerHTML = payment;
      document.getElementById('modalAmount').textContent = amount;
      document.getElementById('modalStatus').innerHTML = status;

      // Open the modal
      const bookingModal = new bootstrap.Modal(document.getElementById('bookingModal'));
      bookingModal.show();
    }

    // Add click event listeners to all View buttons
    document.addEventListener('DOMContentLoaded', function () {
      const viewButtons = document.querySelectorAll('button[title="View Details"]');
      viewButtons.forEach(button => {
        button.onclick = function () {
          viewBookingDetails(this);
        };
      });
    });
  </script>
</body>

</html>